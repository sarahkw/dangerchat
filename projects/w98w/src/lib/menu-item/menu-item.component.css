:host {
    display: inline-flex;
}

button {
    flex: 1;
    display: inline-flex;

    --mi-padding-left: 5px;
    --mi-padding-right: 3px;
    --mi-padding-top: 5px;
    --mi-padding-bottom: 5px;

    padding-left: var(--mi-padding-left);
    padding-right: var(--mi-padding-right);
    padding-top: var(--mi-padding-top);
    padding-bottom: var(--mi-padding-bottom);

    /* TODO: this is copied and pasted many places */
    /* override user agent styles for <button> */
    border: 0;
    text-align: left;
    margin: 0; /* safari ipados */

    --mi-fb-gap: 2px;
    gap: var(--mi-fb-gap);

    font-size: var(--menu-text-size);
    font-family: var(--menu-text-font);
    color: var(--menu-text-color);
    background-color: var(--menu-bg-color);

    /* we'll be drawn over a div that's overlayed on top, which would disable pointer events. */
    pointer-events: auto;
}

button:focus {
    outline: none;
}

:host-context(.w98w-menu) {
    /* FU CSS ... can't (grid-row: item N;) */
    grid-row-start: item-start var(--menu-item-index);
    grid-row-end: item-end var(--menu-item-index);

    grid-column: item;

    /* grid seems to want to draw the bevel above us */
    z-index: 1;
}

button.can-hover:hover, button.sub-opened, button.cannot-hover:active {
    color: var(--menu-sel-text-color);
    background-color: var(--menu-sel-bg-color);
}

.submenu-draw {
    /* auto-generated by PixelImageCssVarDirective */
    width: var(--pi-normal-width);
    height: var(--pi-normal-height);
    background-image: var(--pi-normal-background-image);
    background-size: var(--pi-normal-background-size);
    background-repeat: no-repeat;
}

:is(button.can-hover:hover, button.sub-opened, button.cannot-hover:active) .submenu-draw {
    /* auto-generated by PixelImageCssVarDirective */
    width: var(--pi-selected-width);
    height: var(--pi-selected-height);
    background-image: var(--pi-selected-background-image);
    background-size: var(--pi-selected-background-size);
    background-repeat: no-repeat;
}

div.icon {

    margin-top   : calc(0px - var(--mi-padding-top));
    margin-bottom: calc(0px - var(--mi-padding-bottom));

    height: calc(1em + var(--mi-padding-top) + var(--mi-padding-bottom));
    width: calc(1em + var(--mi-padding-top) + var(--mi-padding-bottom));

    display: flex;
}

div.icon > img {
    pointer-events: none;
}

div.label {
    flex: 1;

    white-space: nowrap;

    max-width: var(--menu-calcs-max-w);
    text-overflow: ellipsis;
    overflow: hidden;
}

div.submenu {
    margin-left: calc(10px - var(--mi-fb-gap));
    align-self: center;
}
